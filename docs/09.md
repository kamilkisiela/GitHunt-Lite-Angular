# [Step 09](https://github.com/kamilkisiela/GitHunt-Lite-Angular/tree/step09)

## Define apollo client

Apollo Client has a pluggable network interface layer, which can let you configure how queries are sent over HTTP, or replace the whole network part with something completely custom, like a websocket transport, mocked server data, or anything else you can imagine.

To create a network interface, use `createNetworkInterface`.

Okay, "network interface", but what If I want to just connect to a GraphQL server and that's it, no configuration, no anything extra. The answer is simple, you can use it like this:

```ts
import { ApolloClient, createNetworkInterface } from 'apollo-client';

const networkInterface = createNetworkInterface('https://example.com/graphql');

const client = new ApolloClient({
  networkInterface,
});
```

But that's not our case, we want to use more than that, for example Query Batching feature (which I'll explain later).

Let's use `createBatchingNetworkInterface()` to be able to batch queries.

Take a look at the commit. Instead of providing a string with a GraphQL endpoint's url I used an object.

`uri` - points to GraphQL endpoint
`opts` - adds extra options
`batchInterval` - interval for query batching

What we did: we specified uri to our GraphQL endpoint and we told Apollo Client that we want to use same-origin policy.

The `networkInterface` seems ready.

The title of this step says "apollo client" not "network layer" so let's move on.

To create a client we need `ApolloClient` class.

Look at the commit now. We provided `networkInterface` and ... enabled `shouldBatch` flag.

Yes, this is the Query Batching feature!

> Apollo Client can automatically batch multiple queries into one request when they are made within a custom interval. This means that if you render several components, for example a navbar, sidebar, and content, and each of those do their own GraphQL query, they will all be sent in one roundtrip.

I will show it to you later, on an example.

### Tips

Time for a cool tip!
If you have a GraphQL server running under `/graphql` and you don't want to configure anything you can simply use:

```ts
const client = new ApolloClient();
```

Apollo Client assumes (if there are no options) that `/graphql` points to a working GraphQL endpoint, it happens by default!

### Resource

- [Network layer on Apollo Docs](http://dev.apollodata.com/core/network.html)