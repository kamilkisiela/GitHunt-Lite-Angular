# [Step 13](https://github.com/kamilkisiela/GitHunt-Lite-Angular/tree/step13)

## Use Angular2Apollo to fetch a query

Here comes Apollo! I missed it sooo much, you probably too.

I mentioned previously about something like `Angular2Apollo` service.
Basically, it's the `Http` service for GraphQL queries.

What I mean by that? With the service you're able to fetch queries, mutate data... Everything starts within Angular2Apollo service.

Wait, what queries, what mutations?!

We're going to talk about those, I promise, stay tuned!

`Angular2Apollo` is injected into a component or a service the same way as any other service.

Take a look at the commit.

We imported `Angular2Apollo` and used it inside the constructor.

### Creating a query

Time for an interesting part.

> Take a look at slide 3rd | "Queries"

We know how the basics of creating queries so let's define our first one.

Since it's a Feed component, it requires list of things. In our case those are submited repositories.

We called the query `Feed`. The `feed` query gives us in return a list of `Entry` objects.

Each Entry object contains `repository` object. For now we need only the name and the owner.

We wrapped it with `gql`. It's a function from `graphql-tag` package that turns `string` into GraphQL's `Document`. 
We know strings but you can also create an object that defines this `Document`.
But in my opinion is waaaay more convinient to use strings.

### Fetching a query

To fetch query, we have two methods: `query()` and `watchQuery()`.

The main difference between them is that the first one returns a `Promise` and the other one an `Observable`.

What should it tell you?

By using `query()` you get the result only once.

With `watchQuery` you can keep updating your query. It works nicely with polling!
You could even take more advantage of it, Observables are very powerfull. But we will talk about it later today.

We want to manipulate the list in the future so we chose to use `watchQuery()`.

Both methods I mentioned take an argument which is an object with options.

We will focus for now only on `options.query`. This is a space to put a query we want to use.


### ApolloQueryObservable

The `ApolloQueryObservable` is the same as an `Observable`, so you can use it with RxJS operators. Only difference is that Apollo's Observable has many methods like: `refetch()`, `startPolling()`, `fetchMore()`, `updateQuery()` and more.

Those are the apollo specific methods that give you the ability to manipulate the query.

### Handling result

Okay, but what about the result...

Each querying returns the `ApolloQueryResult` object.

I explain how it works on my slides.


This is why I used `Observable.of`, to show you how easily it is to switch the "source" of an Observable. It could be `Http.get()` instead and you switch to GraphQL just like that!

