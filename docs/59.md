# [Step 59](https://github.com/kamilkisiela/GitHunt-Lite-Angular/tree/step59)

## Update query to refresh the list of comments

This is one of my favourite features, updating queries after a mutation happens.

Do you remember when I talked about why Observables are so powerful and I will show you an example?

This is the moment! Stay focused!

Let's work on an example. The `CommentsPage` component uses the query called `commentsPage`. It's important because we can manipulate queries only because they have unique names!

Moving foward. One of the mutation's options is `updateQueries`.
It an key-value object where key is a query's name and value is a function.

We know what is the query name needed for but what that function does?

It receives the previous query's results and informations about the mutation and gives a new results in return.

Take a look at the commit.

It gets the new comment from the mutation's result (`newComment`).
Than checks if comment has already been added. If so, it returns the old result.

Now's interesting part.

This is how the previous result looks like:

```ts
{
  entry: {
    comments: [ ... ],
    // ...
  }
}
```

We need to create a new entry based on the old one and also with the new comment.

New comments are being created within a new array where the new comment is at the beginning and the previous comments just right after.

Last step would be to return assign the new entry into new results and return a whole new object.

### Tip

It can work really fast, so to see when the query update happens use network throttling in the Chrome Dev Tools (or something in Firefox I'm not familiar with).





